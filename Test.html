import os

# === CONFIGURATION ===
folder1 = r"C:\Path\To\Folder1"  # Replace with your first folder path
folder2 = r"C:\Path\To\Folder2"  # Replace with your second folder path
output_file = r"C:\Path\To\comparison_result.txt"  # Where the report will be saved

# === FUNCTIONS ===
def get_all_files(base_folder):
    """Walks through a folder recursively and returns a set of all relative file paths."""
    file_paths = set()
    for root, dirs, files in os.walk(base_folder):
        for file in files:
            full_path = os.path.join(root, file)
            relative_path = os.path.relpath(full_path, base_folder)
            file_paths.add(relative_path)
    return file_paths

# === MAIN LOGIC ===
files_in_folder1 = get_all_files(folder1)
files_in_folder2 = get_all_files(folder2)

missing_in_folder2 = files_in_folder1 - files_in_folder2
missing_in_folder1 = files_in_folder2 - files_in_folder1

# === OUTPUT ===
with open(output_file, 'w') as f:
    if missing_in_folder2:
        f.write(f"Files present in {folder1} but missing in {folder2}:\n")
        for file in sorted(missing_in_folder2):
            f.write(f"  {file}\n")
        f.write("\n")
    else:
        f.write(f"No files missing in {folder2} compared to {folder1}.\n\n")

    if missing_in_folder1:
        f.write(f"Files present in {folder2} but missing in {folder1}:\n")
        for file in sorted(missing_in_folder1):
            f.write(f"  {file}\n")
        f.write("\n")
    else:
        f.write(f"No files missing in {folder1} compared to {folder2}.\n")

print(f"Comparison complete! Results saved to {output_file}")

