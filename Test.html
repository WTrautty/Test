#!/usr/bin/env python3
import sys
from pathlib import Path

def main(directory='.'):
    directory = Path(directory)
    
    if not directory.exists():
        print(f"Directory '{directory}' does not exist.")
        return

    # Find all .txt files with 'blah' in the filename
    txt_files = list(directory.glob("*blah*.txt"))
    
    if not txt_files:
        print("No text files with 'blah' in the filename were found.")
        return

    for file in txt_files:
        try:
            content = file.read_text()
        except Exception as e:
            print(f"Could not read file {file}: {e}")
            continue

        # Check if the file's content does NOT contain "ex men"
        if "ex men" not in content:
            print(f"--- File: {file} ---")
            print(content)
            print("-" * 40)

if __name__ == '__main__':
    # Allow the directory to be passed as an argument, default to current directory
    target_dir = sys.argv[1] if len(sys.argv) > 1 else '.'
    main(target_dir)
