<script>
  function toggleView(view) {{
    const mainContent = document.getElementById('mainDashboard');
    const sideContent = document.getElementById('sideDashboard');
    const mainBtn = document.getElementById('mainBtn');
    const sideBtn = document.getElementById('sideBtn');
    const mainSidebar = document.getElementById('mainSidebar');
    const sideSidebar = document.getElementById('sideSidebar');

    // Hide all tabs first
    document.querySelectorAll('.main-tab').forEach(el => el.style.display = 'none');

    // Clear all active sidebar buttons
    document.querySelectorAll('.sidebar button').forEach(btn => btn.classList.remove('active'));

    if (view === 'main') {{
      mainContent.style.display = 'block';
      sideContent.style.display = 'none';
      mainBtn.classList.add('active');
      sideBtn.classList.remove('active');
      mainSidebar.style.display = 'flex';
      sideSidebar.style.display = 'none';

      // Show first tab in main view
      document.getElementById('globalTab').style.display = 'block';
      document.querySelector('#mainSidebar button:nth-of-type(1)').classList.add('active');
    }} else {{
      mainContent.style.display = 'none';
      sideContent.style.display = 'block';
      mainBtn.classList.remove('active');
      sideBtn.classList.add('active');
      mainSidebar.style.display = 'none';
      sideSidebar.style.display = 'flex';

      // Show first tab in side view
      document.getElementById('sideDashboard').style.display = 'block';
      document.querySelector('#sideSidebar button:nth-of-type(1)').classList.add('active');
    }}

    // Trigger layout update
    window.dispatchEvent(new Event('resize'));
  }}
</script>
