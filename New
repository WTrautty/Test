import requests

# === Configuration ===
API_URL = "https://api.starlingbank.com/api/v2/accounts"  # Basic account info endpoint
ACCESS_TOKEN = "YOUR_STARLING_PERSONAL_ACCESS_TOKEN"  # Replace this with your actual token

HEADERS = {
    "Authorization": f"Bearer {ACCESS_TOKEN}",
    "Accept": "application/json"
}

def check_starling_api():
    try:
        response = requests.get(API_URL, headers=HEADERS, timeout=10)
        print(f"Status Code: {response.status_code}")
        if response.status_code == 200:
            print("✅ API access successful.")
            print("Account info retrieved:")
            print(response.json())
        elif response.status_code == 401:
            print("❌ Unauthorized (401). Check your access token.")
        elif response.status_code == 403:
            print("❌ Forbidden (403). Access may be restricted.")
        else:
            print(f"⚠️ Unexpected response: {response.status_code}")
            print(response.text)
    except requests.exceptions.RequestException as e:
        print(f"❌ Error connecting to Starling API: {e}")

# Run the check
check_starling_api()
